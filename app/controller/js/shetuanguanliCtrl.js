/*!qinglongWeb-1.0.0 2017-11-01*/
App.controller("shetuanguanliCtrl",["$scope","$http","ngDialog","PagerExtends","layerAlert","serverUrls","PcService",function(a,b,c,d,e,f,g){a.list=[],a.TitleText="新增",a.searchOption={},a.PcService=g;var h=function(d,h,i){var j,k,l,m=g.getFormData(h);d?(k="post",j=f.addSociety,l="新增"):(m.Id=i,k="put",j=f.upSociety,l="修改"),a.ngDialogPromise=b({method:k,url:j,data:m}).success(function(b){var d=b.State.Code,f=b.State.Message;0===d?(e.autoclose(l+"操作成功！"),a.fetchData(),setTimeout(function(){c.closeAll()},1600)):e.autoclose(f)}).error(function(){})};a.creatOne=function(){var b=a.fieldsList;g.initFormList(b),c.openConfirm({template:"createOne",controller:["$scope",function(a){a.TitleText="新增",a.fieldsList=b,a.formSubmit=function(){h(!0,a.fieldsList)}}],className:"ngdialog-theme-default",closeByDocument:!1})},a.editItem=function(b){var d=a.fieldsList;g.bindFormData(b,d),c.openConfirm({template:"createOne",controller:["$scope",function(a){a.fieldsList=d,a.TitleText="修改",a.formSubmit=function(){h(!1,a.fieldsList,b.Id)}}],className:"ngdialog-theme-default",closeByDocument:!1})},a.toggleText=function(a){var b;switch(a.OpenState){case 2:b="启用";break;case 1:b="停用";break;default:b="无"}return b},a.toggleClass=function(a){var b={"btn-success":2===a.OpenState,"btn-danger":1===a.OpenState};return b},a.toggleItem=function(b){g.toggleItem(a,b,f.societyState)},a.fetchData=function(){d.regListSpecifyPage(a,{apiUrl:f.societyList,params:a.searchOption,success:function(b){a.list=b},error:function(a){e.autoclose(a)}})},a.fetchData(),a.nature=[{Id:1,Name:"社会性质"}],a.fieldsList=[{name:"Name",nameDisplay:"社团名称",editor:"normal",required:!0,value:"",originValue:""},{name:"Superintendent",nameDisplay:"负责人",editor:"normal",required:!0,value:"",originValue:""},{name:"Telephone",nameDisplay:"联系电话",editor:"normal",required:!0,value:"",originValue:""},{name:"Nature",nameDisplay:"性质",editor:"select",required:!0,value:"",opts:a.nature,originValue:a.nature[0].Id},{name:"Describe",nameDisplay:"描述",editor:"textarea",required:!0,value:"",originValue:""},{name:"Sort",nameDisplay:"排序号",editor:"normal",required:!0,value:"",originValue:""}]}]);