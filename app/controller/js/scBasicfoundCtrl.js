/*!qinglongWeb-1.0.0 2017-11-01*/
App.controller("scBasicfoundCtrl",["$scope","$http","ngDialog","PagerExtends","layerAlert","serverUrls","PcService",function(a,b,c,d,e,f,g){a.list=[],a.choseId=1,a.navList=[{Id:1,Name:"按类型统计",Checked:!0},{Id:2,Name:"按年龄段统计",Checked:!1},{Id:3,Name:"按院落统计",Checked:!1}],a.selectedItem=a.navList[0];var h=document.getElementById("myEcharts"),i=echarts.init(h),j=function(b,c){var d=[],e=[],f=[];switch(b){case 1:1===a.choseId?(d=["孤寡老人","残疾人","高龄老人","低保户","失独老人","吸毒人群","劳改刑满释放人员","社区矫正人员","其他人员"],c.forEach(function(a,b){e[b]=a.PopulationType.split(","),f[b]=a.Name})):2===a.choseId&&(d=["社区矫正人员","刑释解教人员","吸毒人员"," 有肇事倾向精神病人","艾滋病人","流浪乞讨人员","闲散青少年"],c.forEach(function(a,b){e[b]=a.FocusCrowd.split(","),f[b]=a.Name}));break;case 2:d=["0-18","18-30","30-45","45-60","60+","其他"],c.forEach(function(a,b){e[b]=[a.Nonage,a.Youth,a.Middle,a.Presby,a.OldAge,a.Other],f[b]=a.Name});break;case 3:d=["数量"],c.forEach(function(a,b){e[b]=[a.Count],f[b]=a.Name})}a.xAxisArray=d,a.seriesArray=e,a.seriesNames=f;var g={title:{text:"居民信息统计"},grid:{left:"1%",right:"1%",bottom:"5%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[]},toolbox:{feature:{saveAsImage:{show:!0},magicType:{show:!0,type:["line","bar"]}}},calculable:!0,xAxis:[{type:"category",data:d,axisLabel:{interval:0}}],yAxis:[{type:"value"}],series:[]};e.forEach(function(a,b){var c=f[b],d={name:f[b],type:"bar",data:e[b]};g.series.push(d),g.legend.data.push(c)}),i.setOption(g,!0)};a.choseCell=function(b){a.choseId=b,j(a.selectedItem.Id,a.list)},a.fetchData=function(){var c={};c.type=a.selectedItem.Id,a.listBusyPromise=b({method:"get",url:f.residentstatistic+"?type="+c.type}).success(function(b){var c=b.State.Code;b.State.Message;0===c&&(a.list=b.Content,j(a.selectedItem.Id,a.list))}).error(function(a){e.autoclose(g.errorResult(a))})},a.fetchData(),a.CheckItem=function(b){a.navList.forEach(function(a,c){a.Checked=!1,a.Id===b.Id&&(a.Checked=!0)}),a.selectedItem=b,a.fetchData()}}]);