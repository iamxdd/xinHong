/*!qinglongWeb-1.0.0 2017-11-01*/
App.controller("gangweiguanliCtrl",["$scope","$http","ngDialog","PagerExtends","layerAlert","serverUrls","PcService",function(a,b,c,d,e,f,g){a.list=[],a.TitleText="新增",a.create=!1,a.PcService=g,a.searchOption={name:""};var h=function(a){var b={};return a.forEach(function(a,c){b[a.name]=a.value}),b},i=function(d,i,j){var k,l="",m="",n=h(i);switch(d){case!0:l="新增",k="post",m=f.addPosition;break;case!1:l="编辑",k="put",m=f.upPosition,n.Id=j}a.ngDialogPromise=b({method:k,url:m,data:n}).success(function(b){var d=b.State.Code,f=b.State.Message;0===d?(e.autoclose(l+"操作成功！"),a.fetchData(),setTimeout(function(){c.closeAll()},1600)):e.autoclose(f)}).error(function(a){e.autoclose(g.errorResult(a))})},j=function(a){a.forEach(function(a,b){a.value=a.originValue})};a.creatOne=function(){var b=a.fieldsList;j(b),c.openConfirm({template:"createOne",controller:["$scope",function(a){a.fieldsList=b,a.TitleText="新增",a.create=!0,a.formSubmit=function(){i(!0,a.fieldsList)}}],className:"ngdialog-theme-default",closeByDocument:!1})};var k=function(a,b){b.forEach(function(b,c){b.value=a[b.name]?a[b.name]:""})};a.editItem=function(b){var d=a.fieldsList;k(b,d),c.openConfirm({template:"createOne",controller:["$scope",function(a){a.fieldsList=d,a.TitleText="修改",a.create=!1,a.formSubmit=function(){i(!1,a.fieldsList,b.Id)}}],className:"ngdialog-theme-default",closeByDocument:!1})},a.toggleText=function(a){var b;switch(a.OpenState){case 1:b="停用";break;case 2:b="启用";break;default:b="无"}return b},a.toggleClass=function(a){var b={"btn-success":2===a.OpenState,"btn-danger":1===a.OpenState};return b},a.toggleItem=function(d){var h,i;1===d.OpenState?(h="停用",i=2):(h="启用",i=1),(2===i||1===i)&&(a.listBusyPromise=b({method:"get",url:f.positionState+"?id="+d.Id+"&state="+i}).success(function(b){var d=b.State.Code,f=b.State.Message;0===d?(e.autoclose(h+"操作成功！"),a.fetchData(),setTimeout(function(){c.closeAll()},1600)):e.autoclose(f)}).error(function(a){e.autoclose(g.errorResult(a))}))},a.fetchData=function(){d.regListSpecifyPage(a,{apiUrl:f.positionList,params:a.searchOption,success:function(b){a.list=b},error:function(a){e.autoclose(a)}})},a.fetchData(),a.education=[{Id:1,Name:"其他"},{Id:2,Name:"大专"},{Id:3,Name:"本科"},{Id:4,Name:"研究生"},{Id:5,Name:"博士及以上"}],a.numberToText=function(a,b){var c="";return b.forEach(function(b,d){b.Id===a&&(c=b.Name)}),c},a.fieldsList=[{name:"Name",nameDisplay:"岗位名称",editor:"normal",required:!0,value:"",originValue:""},{name:"Population",nameDisplay:"定编人数",editor:"normal",required:!0,value:"",originValue:""},{name:"Degree",nameDisplay:"学历要求",editor:"select",required:!0,value:"",opts:a.education,originValue:a.education[0].Id},{name:"Remark",nameDisplay:"备注",editor:"normal",required:!0,value:"",originValue:""},{name:"Sort",nameDisplay:"排序号",editor:"normal",required:!0,value:"",originValue:0}]}]);